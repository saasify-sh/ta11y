<p align="center">
  <a href="https://ta11y.saasify.sh" title="ta11y">
    <img src="https://raw.githubusercontent.com/saasify-sh/ta11y/master/media/logo.svg?sanitize=true" alt="ta11y Logo" width="256" />
  </a>
</p>

# @ta11y/extract

> Extracts content from websites for running accessibility audits with ta11y.

[![NPM](https://img.shields.io/npm/v/@ta11y/extract.svg)](https://www.npmjs.com/package/@ta11y/extract) [![Build Status](https://travis-ci.com/saasify-sh/ta11y.svg?branch=master)](https://travis-ci.com/saasify-sh/ta11y) [![JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](https://standardjs.com)

## Install

```bash
npm install --save @ta11y/extract
```

## Usage

```js
const { extract } = require('@ta11y/extract')

extract('https://en.wikipedia.org')
  .then((result) => {
    console.log(result.summary) // overview of results (number of urls visited, success, error)
    console.log(result.results) // detailed results keyed by url
  })
```

```js
const { extract } = require('@ta11y/extract')

// example passing HTML directly
extract('<!doctype><html><body><h1>I ❤ accessibility</h1></body></html>')
  .then((result) => {
    console.log(result.summary) // overview of results (number of urls visited, success, error)
    console.log(result.results) // detailed results keyed by url

    // note that the result key for an HTML input is 'root' instead of url
  })
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### [extract](https://git@github.com/:saasify-sh/ta11y/blob/19cea00aa231423b41282210b535dcf4b4ce4c5b/packages/ta11y-extract/lib/index.js#L38-L112)

Extracts the dynamic HTML content from a website, optionally crawling the site
to discover additional pages and extracting those too.

Type: `function (urlOrHtml, opts): Promise`

-   `urlOrHtml` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** URL or raw HTML to process.
-   `opts` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Config options.
    -   `opts.browser` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Required [Puppeteer](https://pptr.dev) browser instance to use.
    -   `opts.crawl` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether or not to crawl additional pages. (optional, default `false`)
    -   `opts.maxDepth` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Maximum crawl depth while crawling. (optional, default `16`)
    -   `opts.maxVisit` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)?** Maximum number of pages to visit while crawling.
    -   `opts.sameOrigin` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether or not to only consider crawling links with the same origin as the root URL. (optional, default `true`)
    -   `opts.blacklist` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>?** Optional blacklist of URL [glob patterns](https://github.com/micromatch/micromatch) to ignore.
    -   `opts.whitelist` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>?** Optional whitelist of URL [glob patterns](https://github.com/micromatch/micromatch) to only include.
    -   `opts.gotoOptions` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Customize the `Page.goto` navigation options.
    -   `opts.viewport` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Set the browser window's viewport dimensions and/or resolution.
    -   `opts.userAgent` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** Set the browser's [user-agent](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent).
    -   `opts.emulateDevice` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** Emulate a specific device type.-   Use the `name` property from one of the built-in [devices](https://github.com/GoogleChrome/puppeteer/blob/master/lib/DeviceDescriptors.js).
        -   Overrides `viewport` and `userAgent`.

## License

MIT © [Saasify](https://saasify.sh)
